import './polyfills.server.mjs';
import{b as De,d as K,e as Me,f as Oe}from"./chunk-Z6F5XGHV.mjs";import{$ as N,A as be,Ab as Q,B as O,F as ve,G as ye,P as Y,Ra as J,V as _e,a as B,b as ge,c as me,d as ke,da as Ie,e as y,f as C,g as q,gb as U,h as D,i as z,ja as k,jb as Re,k as Ae,ka as A,l as Ee,la as S,m as Te,n as Z,o as _,p as X,pa as Ce,pb as xe,q as we,qa as Pe,ra as Se,t as P,u as M,v as g,w as d,ya as R}from"./chunk-LWYHE5LM.mjs";import{a as Ne,b as ee,c as Fe,d as je,e as te,f as Le,g as ne,h as $e,i as F,j as E}from"./chunk-FHJBTQOF.mjs";import"./chunk-3SZVCSKE.mjs";import{j as w}from"./chunk-H6KHSOBK.mjs";var ct="firebase",lt="10.12.2";E.registerVersion(ct,lt,"app-compat");var ut="firebase",dt="10.12.2";F(ut,dt,"app");var pt=(e,t)=>{let n=t?[t]:$e(),r=[];return n.forEach(i=>{i.container.getProvider(e).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},j=class{constructor(){return pt(ft)}},ft="app-check";function re(){}var W=class{zone;delegate;constructor(t,n=ke){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){let i=this.zone,o=function(a){i.runGuarded(()=>{t.apply(this,[a])})};return this.delegate.schedule(o,n,r)}},ie=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",re,{},re,re)),n.pipe(we({next:r,complete:r,error:r})).subscribe(t).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},He=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new W(Zone.current)),this.insideAngular=n.run(()=>new W(Zone.current,me)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||e)(d(N))};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ht(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function Be(e){return gt(ht())(e)}function gt(e){return function(n){return n=n.lift(new ie(e.ngZone)),n.pipe(C(e.outsideAngular),y(e.insideAngular))}}var kt=new Map,At={activated:!1,tokenObservers:[]},Et={initialized:!1,enabled:!1};function f(e){return kt.get(e)||Object.assign({},At)}function Ve(){return Et}var Tt="https://content-firebaseappcheck.googleapis.com/v1";var wt="exchangeDebugToken",ze={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Cn=24*60*60*1e3;var se=class{constructor(t,n,r,i,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return w(this,null,function*(){this.stop();try{this.pending=new ee,this.pending.promise.catch(n=>{}),yield bt(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new ee,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function bt(e){return new Promise(t=>{setTimeout(t,e)})}var vt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},b=new je("appCheck","AppCheck",vt);function Ge(e){if(!f(e).activated)throw b.create("use-before-activation",{appName:e.name})}function qe(r,i){return w(this,arguments,function*({url:e,body:t},n){let o={"Content-Type":"application/json"},a=n.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&(o["X-Firebase-Client"]=p)}let c={method:"POST",body:JSON.stringify(t),headers:o},s;try{s=yield fetch(e,c)}catch(p){throw b.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw b.create("fetch-status-error",{httpStatus:s.status});let u;try{u=yield s.json()}catch(p){throw b.create("fetch-parse-error",{originalErrorMessage:p?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw b.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let I=Number(h[1])*1e3,H=Date.now();return{token:u.token,expireTimeMillis:H+I,issuedAtTimeMillis:H}})}function Ze(e,t){let{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${Tt}/projects/${n}/apps/${r}:${wt}?key=${i}`,body:{debug_token:t}}}var yt="firebase-app-check-database",_t=1,ae="firebase-app-check-store";var V=null;function It(){return V||(V=new Promise((e,t)=>{try{let n=indexedDB.open(yt,_t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(b.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ae,{keyPath:"compositeKey"})}}}catch(n){t(b.create("storage-open",{originalErrorMessage:n?.message}))}}),V)}function Ct(e,t){return Pt(St(e),t)}function Pt(e,t){return w(this,null,function*(){let r=(yield It()).transaction(ae,"readwrite"),o=r.objectStore(ae).put({compositeKey:e,value:t});return new Promise((a,c)=>{o.onsuccess=s=>{a()},r.onerror=s=>{var u;c(b.create("storage-set",{originalErrorMessage:(u=s.target.error)===null||u===void 0?void 0:u.message}))}})})}function St(e){return`${e.options.appId}-${e.name}`}var ce=new Le("@firebase/app-check");function oe(e,t){return Fe()?Ct(e,t).catch(n=>{ce.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Xe(){return Ve().enabled}function Ye(){return w(this,null,function*(){let e=Ve();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Rt={error:"UNKNOWN_ERROR"};function xt(e){return Ne.encodeString(JSON.stringify(e),!1)}function le(e,t=!1){return w(this,null,function*(){let n=e.app;Ge(n);let r=f(n),i=r.token,o;if(i&&!$(i)&&(r.token=void 0,i=void 0),!i){let s=yield r.cachedTokenPromise;s&&($(s)?i=s:yield oe(n,void 0))}if(!t&&i&&$(i))return{token:i.token};let a=!1;if(Xe()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qe(Ze(n,yield Ye()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),a=!0);let s=yield r.exchangeTokenPromise;return yield oe(n,s),r.token=s,{token:s.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),a=!0),i=yield f(n).exchangeTokenPromise}catch(s){s.code==="appCheck/throttled"?ce.warn(s.message):ce.error(s),o=s}let c;return i?o?$(i)?c={token:i.token,internalError:o}:c=Ke(o):(c={token:i.token},r.token=i,yield oe(n,i)):c=Ke(o),a&&Nt(n,c),c})}function Dt(e){return w(this,null,function*(){let t=e.app;Ge(t);let{provider:n}=f(t);if(Xe()){let r=yield Ye(),{token:i}=yield qe(Ze(t,r),e.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function Mt(e,t,n,r){let{app:i}=e,o=f(i),a={next:n,error:r,type:t};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&$(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),Ue(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Ue(e))}function Je(e,t){let n=f(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Ue(e){let{app:t}=e,n=f(t),r=n.tokenRefresher;r||(r=Ot(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Ot(e){let{app:t}=e;return new se(()=>w(this,null,function*(){let n=f(t),r;if(n.token?r=yield le(e,!0):r=yield le(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=f(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},ze.RETRIAL_MIN_WAIT,ze.RETRIAL_MAX_WAIT)}function Nt(e,t){let n=f(e).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function $(e){return e.expireTimeMillis-Date.now()>0}function Ke(e){return{token:xt(Rt),error:e}}var ue=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=f(this.app);for(let n of t)Je(this.app,n.next);return Promise.resolve()}};function Ft(e,t){return new ue(e,t)}function jt(e){return{getToken:t=>le(e,t),getLimitedUseToken:()=>Dt(e),addTokenListener:t=>Mt(e,"INTERNAL",t),removeTokenListener:t=>Je(e.app,t)}}var Lt="@firebase/app-check",$t="0.8.4";var Ht="app-check",We="app-check-internal";function Bt(){ne(new te(Ht,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Ft(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(We).initialize()})),ne(new te(We,e=>{let t=e.getProvider("app-check").getImmediate();return jt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),F(Lt,$t)}Bt();var zt=["localhost","0.0.0.0","127.0.0.1"],$n=typeof window<"u"&&zt.includes(window.location.hostname);var Kt=["ngOnDestroy"],et=(e,t,n,r={})=>new Proxy(e,{get:(i,o)=>n.runOutsideAngular(()=>{if(e[o])return r?.spy?.get&&r.spy.get(o,e[o]),e[o];if(Kt.indexOf(o)>-1)return()=>{};let a=t.toPromise().then(c=>{let s=c?.[o];return typeof s=="function"?s.bind(c):s?.then?s.then(u=>n.run(()=>u)):n.run(()=>s)});return new Proxy(()=>{},{get:(c,s)=>a[s],apply:(c,s,u)=>a.then(h=>{let I=h?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,I),I})})})});var de=class{constructor(t){return t}},tt=new g("angularfire2.app.options"),nt=new g("angularfire2.app.name");function rt(e,t,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let a=E.apps.filter(c=>c&&c.name===i.name)[0]||t.runOutsideAngular(()=>E.initializeApp(e,i));try{if(JSON.stringify(e)!==JSON.stringify(a.options)){let c=!!module.hot;Wt("error",`${a.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new de(a)}var Wt=(e,...t)=>{J()&&typeof console<"u"&&console[e](...t)};function it(e,t,n,r,i){let[,o,a]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===e)||[];if(o)return Vt(i,a)||(Qe("error",`${t} was already initialized on the ${n} Firebase App with different settings.${Gt?" You may need to reload as Firebase is not HMR aware.":""}`),Qe("warn",{is:i,was:a})),o;{let c=r();return globalThis.\u0275AngularfireInstanceCache.push([e,c,i]),c}}function Vt(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var Gt=typeof module<"u"&&!!module.hot,Qe=(e,...t)=>{J()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var qt=new g("angularfire2.auth.use-emulator"),Zt=new g("angularfire2.auth.settings"),Xt=new g("angularfire2.auth.tenant-id"),Yt=new g("angularfire2.auth.langugage-code"),Jt=new g("angularfire2.auth.use-device-language"),Qt=new g("angularfire.auth.persistence"),en=(e,t,n,r,i,o,a,c)=>it(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let s=t.runOutsideAngular(()=>e.auth());if(n&&s.useEmulator(...n),r&&(s.tenantId=r),s.languageCode=i,o&&s.useDeviceLanguage(),a)for(let[u,h]of Object.entries(a))s.settings[u]=h;return c&&s.setPersistence(c),s},[n,r,i,o,a,c]),ot=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,a,c,s,u,h,I,H,p){let fe=new ge,x=D(void 0).pipe(y(a.outsideAngular),_(()=>o.runOutsideAngular(()=>import("./chunk-F5MMXAL6.mjs"))),z(()=>rt(n,o,r)),z(T=>en(T,o,c,u,h,I,s,H)),Z({bufferSize:1,refCount:!1}));if(Re(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=D(null);else{x.pipe(Te()).subscribe();let T=x.pipe(_(l=>l.getRedirectResult().then(m=>m,()=>null)),Be,Z({bufferSize:1,refCount:!1})),he=x.pipe(_(l=>new B(m=>({unsubscribe:o.runOutsideAngular(()=>l.onAuthStateChanged(v=>m.next(v),v=>m.error(v),()=>m.complete()))})))),G=x.pipe(_(l=>new B(m=>({unsubscribe:o.runOutsideAngular(()=>l.onIdTokenChanged(v=>m.next(v),v=>m.error(v),()=>m.complete()))}))));this.authState=T.pipe(X(he),C(a.outsideAngular),y(a.insideAngular)),this.user=T.pipe(X(G),C(a.outsideAngular),y(a.insideAngular)),this.idToken=this.user.pipe(_(l=>l?q(l.getIdToken()):D(null))),this.idTokenResult=this.user.pipe(_(l=>l?q(l.getIdTokenResult()):D(null))),this.credential=Ae(T,fe,this.authState.pipe(Ee(l=>!l))).pipe(z(l=>l?.user?l:null),C(a.outsideAngular),y(a.insideAngular))}return et(this,x,o,{spy:{apply:(T,he,G)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&G.then(l=>fe.next(l))}}})}static \u0275fac=function(r){return new(r||e)(d(tt),d(nt,8),d(Y),d(N),d(He),d(qt,8),d(Zt,8),d(Xt,8),d(Yt,8),d(Jt,8),d(Qt,8),d(j,8))};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var st=(()=>{let t=class t{constructor(r){this.afAuth=r}GoogleAuth(){try{this.afAuth.signInWithPopup(new E.auth.GoogleAuthProvider).then(()=>{location.replace("/dashboard")})}catch{}}};t.\u0275fac=function(i){return new(i||t)(d(ot))},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function rn(e,t){e&1&&(k(0,"span",9),R(1,"Welcome to "),k(2,"span",10),R(3,"Zap"),A(),R(4,"Map"),A(),S(5,"br"),k(6,"span"),R(7," Powering the Future of Electric Mobility "),A(),S(8,"br")(9,"br"),k(10,"span"),R(11," Log in to access real-time charging station updates, optimize your charging schedules, and join our eco-friendly driving community. Together, we drive towards a greener tomorrow. "),A())}function on(e,t){if(e&1){let n=Ce();k(0,"div",11)(1,"p-button",12),Pe("click",function(){ve(n);let i=Se();return ye(i.GoogleAuth())}),A()(),S(2,"br")}}var pe=(()=>{let t=class t{constructor(r){this.authService=r}GoogleAuth(){this.authService.GoogleAuth()}};t.\u0275fac=function(i){return new(i||t)(_e(st))},t.\u0275cmp=be({type:t,selectors:[["app-login"]],decls:9,vars:0,consts:[[1,"main-div"],[1,"logo-container"],["alt","Logo","src","assets/images/Radx-logo-web.svg","height","50px"],[2,"display","flex","flex-direction","column"],[1,"card"],["pTemplate","header"],["pTemplate","footer"],[2,"display","flex","flex-flow","row","flex-grow","0.5"],[2,"flex","1 1 auto"],[2,"color","#343F5A","font-family","'Montserrat', sans-serif","font-size","45px","font-weight","bold"],[2,"color","#3D73FF"],[2,"display","flex","flex-direction","row","gap","16px","justify-content","space-evenly","width","100%"],["icon","pi pi-google","label","Login with Google","styleClass","p-button-rounded p-button-danger",3,"click"]],template:function(i,o){i&1&&(k(0,"div",0)(1,"div",1),S(2,"img",2),A(),k(3,"div",3)(4,"p-card",4),Ie(5,rn,12,0,"ng-template",5)(6,on,3,0,"ng-template",6),A()(),k(7,"div",7),S(8,"span",8),A()())},dependencies:[K,Me,De],styles:[".main-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;height:98vh;background-image:url(/assets/images/login-bcg.jpg);background-repeat:no-repeat;background-size:cover;position:relative}.logo-container[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px}[_nghost-%COMP%]     .p-card{width:550px;margin:0 auto;padding:20px;background:#f9fbfd33;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:20px;box-shadow:0 5px 15px #0000001a;gap:32px}p-card-header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.card-body[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;display:flex;flex-direction:column;gap:32px}"]});let e=t;return e})();var sn=[{path:"",component:pe,pathMatch:"full"}],at=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=O({type:t}),t.\u0275inj=M({imports:[U,Q.forChild(sn),Q]});let e=t;return e})();var Ir=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=O({type:t}),t.\u0275inj=M({imports:[U,at,xe,K,Oe]});let e=t;return e})();export{Ir as AuthModule};
