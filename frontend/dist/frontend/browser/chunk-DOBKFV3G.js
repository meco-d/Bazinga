import{Aa as Ae,Ca as we,D as N,E as R,Eb as Ce,F as v,G as u,J as pe,K as S,Ka as _,N as fe,O as he,Qb as j,Sb as _e,Tb as ye,Ub as J,V as ge,Vb as xe,Wb as De,Xb as Me,Yb as Oe,Z as me,Zb as Ne,_b as Fe,ac as je,b as K,c as ce,e as I,ea as ke,f as M,g as U,h as P,i as O,ja as Te,mb as F,o as le,ob as be,p as ue,qb as ve,ra as g,sa as m,ta as C,u as de,v as W,xa as Ee,y as b,yb as G,z}from"./chunk-J7OWS2ZW.js";import"./chunk-GWWBSLDA.js";import{A as Se,B as X,F as Y,G as Z,f as Ie,i as V,p as Pe,r as Re,y as q}from"./chunk-V4ZYFSKC.js";import{h as E}from"./chunk-SIAVTO45.js";var Je=new Map,Qe={activated:!1,tokenObservers:[]},et={initialized:!1,enabled:!1};function f(e){return Je.get(e)||Object.assign({},Qe)}function Ke(){return et}var tt="https://content-firebaseappcheck.googleapis.com/v1";var nt="exchangeDebugToken",Le={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},qt=24*60*60*1e3;var ee=class{constructor(t,r,n,o,i){if(this.operation=t,this.retryPolicy=r,this.getWaitDuration=n,this.lowerBound=o,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=o,o>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return E(this,null,function*(){this.stop();try{this.pending=new V,this.pending.promise.catch(r=>{}),yield rt(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new V,this.pending.promise.catch(r=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(r){this.retryPolicy(r)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let r=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),r}}};function rt(e){return new Promise(t=>{setTimeout(t,e)})}var ot={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},A=new Re("appCheck","AppCheck",ot);function Ue(e){if(!f(e).activated)throw A.create("use-before-activation",{appName:e.name})}function We(n,o){return E(this,arguments,function*({url:e,body:t},r){let i={"Content-Type":"application/json"},a=r.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&(i["X-Firebase-Client"]=p)}let c={method:"POST",body:JSON.stringify(t),headers:i},s;try{s=yield fetch(e,c)}catch(p){throw A.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw A.create("fetch-status-error",{httpStatus:s.status});let d;try{d=yield s.json()}catch(p){throw A.create("fetch-parse-error",{originalErrorMessage:p?.message})}let k=d.ttl.match(/^([\d.]+)(s)$/);if(!k||!k[2]||isNaN(Number(k[1])))throw A.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let $=Number(k[1])*1e3,D=Date.now();return{token:d.token,expireTimeMillis:D+$,issuedAtTimeMillis:D}})}function ze(e,t){let{projectId:r,appId:n,apiKey:o}=e.options;return{url:`${tt}/projects/${r}/apps/${n}:${nt}?key=${o}`,body:{debug_token:t}}}var it="firebase-app-check-database",st=1,te="firebase-app-check-store";var L=null;function at(){return L||(L=new Promise((e,t)=>{try{let r=indexedDB.open(it,st);r.onsuccess=n=>{e(n.target.result)},r.onerror=n=>{var o;t(A.create("storage-open",{originalErrorMessage:(o=n.target.error)===null||o===void 0?void 0:o.message}))},r.onupgradeneeded=n=>{let o=n.target.result;switch(n.oldVersion){case 0:o.createObjectStore(te,{keyPath:"compositeKey"})}}}catch(r){t(A.create("storage-open",{originalErrorMessage:r?.message}))}}),L)}function ct(e,t){return lt(ut(e),t)}function lt(e,t){return E(this,null,function*(){let n=(yield at()).transaction(te,"readwrite"),i=n.objectStore(te).put({compositeKey:e,value:t});return new Promise((a,c)=>{i.onsuccess=s=>{a()},n.onerror=s=>{var d;c(A.create("storage-set",{originalErrorMessage:(d=s.target.error)===null||d===void 0?void 0:d.message}))}})})}function ut(e){return`${e.options.appId}-${e.name}`}var ne=new Se("@firebase/app-check");function Q(e,t){return Pe()?ct(e,t).catch(r=>{ne.warn(`Failed to write token to IndexedDB. Error: ${r}`)}):Promise.resolve()}function Ge(){return Ke().enabled}function Ve(){return E(this,null,function*(){let e=Ke();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var dt={error:"UNKNOWN_ERROR"};function pt(e){return Ie.encodeString(JSON.stringify(e),!1)}function re(e,t=!1){return E(this,null,function*(){let r=e.app;Ue(r);let n=f(r),o=n.token,i;if(o&&!x(o)&&(n.token=void 0,o=void 0),!o){let s=yield n.cachedTokenPromise;s&&(x(s)?o=s:yield Q(r,void 0))}if(!t&&o&&x(o))return{token:o.token};let a=!1;if(Ge()){n.exchangeTokenPromise||(n.exchangeTokenPromise=We(ze(r,yield Ve()),e.heartbeatServiceProvider).finally(()=>{n.exchangeTokenPromise=void 0}),a=!0);let s=yield n.exchangeTokenPromise;return yield Q(r,s),n.token=s,{token:s.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().finally(()=>{n.exchangeTokenPromise=void 0}),a=!0),o=yield f(r).exchangeTokenPromise}catch(s){s.code==="appCheck/throttled"?ne.warn(s.message):ne.error(s),i=s}let c;return o?i?x(o)?c={token:o.token,internalError:i}:c=$e(i):(c={token:o.token},n.token=o,yield Q(r,o)):c=$e(i),a&&mt(r,c),c})}function ft(e){return E(this,null,function*(){let t=e.app;Ue(t);let{provider:r}=f(t);if(Ge()){let n=yield Ve(),{token:o}=yield We(ze(t,n),e.heartbeatServiceProvider);return{token:o}}else{let{token:n}=yield r.getToken();return{token:n}}})}function ht(e,t,r,n){let{app:o}=e,i=f(o),a={next:r,error:n,type:t};if(i.tokenObservers=[...i.tokenObservers,a],i.token&&x(i.token)){let c=i.token;Promise.resolve().then(()=>{r({token:c.token}),He(e)}).catch(()=>{})}i.cachedTokenPromise.then(()=>He(e))}function qe(e,t){let r=f(e),n=r.tokenObservers.filter(o=>o.next!==t);n.length===0&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),r.tokenObservers=n}function He(e){let{app:t}=e,r=f(t),n=r.tokenRefresher;n||(n=gt(e),r.tokenRefresher=n),!n.isRunning()&&r.isTokenAutoRefreshEnabled&&n.start()}function gt(e){let{app:t}=e;return new ee(()=>E(this,null,function*(){let r=f(t),n;if(r.token?n=yield re(e,!0):n=yield re(e),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{let r=f(t);if(r.token){let n=r.token.issuedAtTimeMillis+(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)*.5+3e5,o=r.token.expireTimeMillis-5*60*1e3;return n=Math.min(n,o),Math.max(0,n-Date.now())}else return 0},Le.RETRIAL_MIN_WAIT,Le.RETRIAL_MAX_WAIT)}function mt(e,t){let r=f(e).tokenObservers;for(let n of r)try{n.type==="EXTERNAL"&&t.error!=null?n.error(t.error):n.next(t)}catch{}}function x(e){return e.expireTimeMillis-Date.now()>0}function $e(e){return{token:pt(dt),error:e}}var oe=class{constructor(t,r){this.app=t,this.heartbeatServiceProvider=r}_delete(){let{tokenObservers:t}=f(this.app);for(let r of t)qe(this.app,r.next);return Promise.resolve()}};function kt(e,t){return new oe(e,t)}function Tt(e){return{getToken:t=>re(e,t),getLimitedUseToken:()=>ft(e),addTokenListener:t=>ht(e,"INTERNAL",t),removeTokenListener:t=>qe(e.app,t)}}var Et="@firebase/app-check",At="0.8.4";var wt="app-check",Be="app-check-internal";function bt(){X(new q(wt,e=>{let t=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat");return kt(t,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider(Be).initialize()})),X(new q(Be,e=>{let t=e.getProvider("app-check").getImmediate();return Tt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Y(Et,At)}bt();var vt=["localhost","0.0.0.0","127.0.0.1"],an=typeof window<"u"&&vt.includes(window.location.hostname);var _t=new v("angularfire2.auth.use-emulator"),yt=new v("angularfire2.auth.settings"),It=new v("angularfire2.auth.tenant-id"),Pt=new v("angularfire2.auth.langugage-code"),Rt=new v("angularfire2.auth.use-device-language"),St=new v("angularfire.auth.persistence"),xt=(e,t,r,n,o,i,a,c)=>je(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let s=t.runOutsideAngular(()=>e.auth());if(r&&s.useEmulator(...r),n&&(s.tenantId=n),s.languageCode=o,i&&s.useDeviceLanguage(),a)for(let[d,k]of Object.entries(a))s.settings[d]=k;return c&&s.setPersistence(c),s},[r,n,o,i,a,c]),Xe=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(r,n,o,i,a,c,s,d,k,$,D,p){let se=new ce,y=P(void 0).pipe(I(a.outsideAngular),b(()=>i.runOutsideAngular(()=>import("./chunk-KOXC6MVG.js"))),O(()=>Fe(r,i,n)),O(T=>xt(T,i,c,d,k,$,s,D)),W({bufferSize:1,refCount:!1}));if(be(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=P(null);else{y.pipe(de()).subscribe();let T=y.pipe(b(l=>l.getRedirectResult().then(h=>h,()=>null)),De,W({bufferSize:1,refCount:!1})),ae=y.pipe(b(l=>new K(h=>({unsubscribe:i.runOutsideAngular(()=>l.onAuthStateChanged(w=>h.next(w),w=>h.error(w),()=>h.complete()))})))),B=y.pipe(b(l=>new K(h=>({unsubscribe:i.runOutsideAngular(()=>l.onIdTokenChanged(w=>h.next(w),w=>h.error(w),()=>h.complete()))}))));this.authState=T.pipe(z(ae),M(a.outsideAngular),I(a.insideAngular)),this.user=T.pipe(z(B),M(a.outsideAngular),I(a.insideAngular)),this.idToken=this.user.pipe(b(l=>l?U(l.getIdToken()):P(null))),this.idTokenResult=this.user.pipe(b(l=>l?U(l.getIdTokenResult()):P(null))),this.credential=le(T,se,this.authState.pipe(ue(l=>!l))).pipe(O(l=>l?.user?l:null),M(a.outsideAngular),I(a.insideAngular))}return Me(this,y,i,{spy:{apply:(T,ae,B)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&B.then(l=>se.next(l))}}})}static \u0275fac=function(n){return new(n||e)(u(Oe),u(Ne,8),u(ge),u(ke),u(xe),u(_t,8),u(yt,8),u(It,8),u(Pt,8),u(Rt,8),u(St,8),u(J,8))};static \u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var Ye=(()=>{let t=class t{constructor(n){this.afAuth=n}GoogleAuth(){try{this.afAuth.signInWithPopup(new Z.auth.GoogleAuthProvider).then(()=>{location.replace("/dashboard")})}catch{}}};t.\u0275fac=function(o){return new(o||t)(u(Xe))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Ot(e,t){e&1&&(g(0,"span",9),_(1,"Welcome to "),g(2,"span",10),_(3,"Zap"),m(),_(4,"Map"),m(),C(5,"br"),g(6,"span"),_(7," Powering the Future of Electric Mobility "),m(),C(8,"br")(9,"br"),g(10,"span"),_(11," Log in to access real-time charging station updates, optimize your charging schedules, and join our eco-friendly driving community. Together, we drive towards a greener tomorrow. "),m())}function Nt(e,t){if(e&1){let r=Ee();g(0,"div",11)(1,"p-button",12),Ae("click",function(){fe(r);let o=we();return he(o.GoogleAuth())}),m()(),C(2,"br")}}var ie=(()=>{let t=class t{constructor(n){this.authService=n}GoogleAuth(){this.authService.GoogleAuth()}};t.\u0275fac=function(o){return new(o||t)(me(Ye))},t.\u0275cmp=pe({type:t,selectors:[["app-login"]],decls:9,vars:0,consts:[[1,"main-div"],[1,"logo-container"],["alt","Logo","src","assets/images/Radx-logo-web.svg","height","50px"],[2,"display","flex","flex-direction","column"],[1,"card"],["pTemplate","header"],["pTemplate","footer"],[2,"display","flex","flex-flow","row","flex-grow","0.5"],[2,"flex","1 1 auto"],[2,"color","#343F5A","font-family","'Montserrat', sans-serif","font-size","45px","font-weight","bold"],[2,"color","#3D73FF"],[2,"display","flex","flex-direction","row","gap","16px","justify-content","space-evenly","width","100%"],["icon","pi pi-google","label","Login with Google","styleClass","p-button-rounded p-button-danger",3,"click"]],template:function(o,i){o&1&&(g(0,"div",0)(1,"div",1),C(2,"img",2),m(),g(3,"div",3)(4,"p-card",4),Te(5,Ot,12,0,"ng-template",5)(6,Nt,3,0,"ng-template",6),m()(),g(7,"div",7),C(8,"span",8),m()())},dependencies:[j,_e,Ce],styles:[".main-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;height:98vh;background-image:url(/assets/images/login-bcg.jpg);background-repeat:no-repeat;background-size:cover;position:relative}.logo-container[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px}[_nghost-%COMP%]     .p-card{width:550px;margin:0 auto;padding:20px;background:#f9fbfd33;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:20px;box-shadow:0 5px 15px #0000001a;gap:32px}p-card-header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.card-body[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;display:flex;flex-direction:column;gap:32px}"]});let e=t;return e})();var Ft=[{path:"",component:ie,pathMatch:"full"}],Ze=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=S({type:t}),t.\u0275inj=R({imports:[F,G.forChild(Ft),G]});let e=t;return e})();var Kn=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=S({type:t}),t.\u0275inj=R({imports:[F,Ze,ve,j,ye]});let e=t;return e})();export{Kn as AuthModule};
